<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--/* PWA Manifest */-->
    <link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#38bdf8">
<link rel="icon" href="C:\Users\DELL\Downloads\file_0000000049307206bf302b88c5868cf7(1) (1).png">

    <title>Nexus OS | Productivity Suite</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
       :root {
    /* Updated Palette: Deeper colors to allow the "water" effect to pop */
    --bg-dark: #020617;
    --glass: rgba(255, 255, 255, 0.04);
    --glass-border: rgba(255, 255, 255, 0.08);
    --accent: #38bdf8;
    --accent-purple: #8a2be2;
    --accent-glow: 0 0 15px rgba(138, 43, 226, 0.4);
    --text: #f8fafc;
}

body {
    margin: 0;
    padding: 0;
    height: 100vh;
    overflow: hidden;
    background-color: var(--bg-dark);
    /* The "Water" Effect: Multiple layered gradients moving independently */
    background-image: 
        radial-gradient(at 0% 0%, rgba(56, 189, 248, 0.15) 0px, transparent 50%),
        radial-gradient(at 100% 0%, rgba(139, 92, 246, 0.15) 0px, transparent 50%),
        radial-gradient(at 100% 100%, rgba(20, 184, 166, 0.15) 0px, transparent 50%),
        radial-gradient(at 0% 100%, rgba(59, 130, 246, 0.15) 0px, transparent 50%);
    background-size: 200% 200%;
    animation: waterFlow 15s ease infinite;
    color: var(--text);
}

/* Keyframes for the lively background movement */
@keyframes waterFlow {
    0% {
        background-position: 0% 0%;
    }
    25% {
        background-position: 100% 0%;
    }
    50% {
        background-position: 100% 100%;
    }
    75% {
        background-position: 0% 100%;
    }
    100% {
        background-position: 0% 0%;
    }
}

/* Enhancing the Glassmorphism to react to the moving background */
.app-card, .btn-back, .task-controls, .cal-container {
    backdrop-filter: blur(25px) saturate(180%);
    -webkit-backdrop-filter: blur(25px) saturate(180%);
}

        /* --- Splash Screen --- */
        #splash {
            position: fixed;
            inset: 0;
            background: #0f172a;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 0.8s ease;
        }

        .loader {
            width: 50px;
            height: 50px;
            border: 3px solid var(--glass-border);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        /* --- Layout Structures --- */
        .container {
            height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 2rem;
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            padding-top: 80px !important;
            box-sizing: border-box;
            overflow-y: auto;
   }

       header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.5rem;
    background: rgba(255, 255, 255, 0.03);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid var(--glass-border);
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 100;
}

.logo-section {
    display: flex;
    align-items: center;
    gap: 12px;
}

.logo-icon {
    width: 32px;
    height: 32px;
    background: var(--accent);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #000;
    font-weight: bold;
    box-shadow: 0 0 15px rgba(56, 189, 248, 0.4);
}

.logo-text {
    font-weight: 700;
    letter-spacing: 1px;
    font-size: 1.2rem;
    background: linear-gradient(to right, #fff, var(--accent));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.system-tray {
    display: flex;
    align-items: center;
    gap: 20px;
}

#clock {
    font-family: 'Courier New', monospace;
    font-weight: 600;
    font-size: 1.1rem;
    color: var(--accent);
}

.status-indicator {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.8rem;
    color: #94a3b8;
}

.dot {
    width: 8px;
    height: 8px;
    background: #10b981;
    border-radius: 50%;
    box-shadow: 0 0 8px #10b981;
}

/* Adjust container to give space for fixed header */
.container {
    padding-top: 6rem !important; 
}
        .screen {
            display: none;
            height: calc(100vh - 80px);
            margin-top: 20px;
            animation: fadeIn 0.4s ease-out;
        }

        .screen.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- Home Dashboard --- */
        .app-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            max-width: 1000px;
            margin: 0 auto;
        }

        .app-card {
            background: var(--glass);
            backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .app-card:hover {
            transform: translateY(-10px);
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--accent);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .app-card i { font-size: 3rem; color: var(--accent); }

        /* --- Shared App UI --- */
        .app-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .btn-back {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            color: white;
            padding: 0.8rem 1.2rem;
            border-radius: 12px;
            cursor: pointer;
        }

      /* --- Task Flow Integration Styles --- */
        .glass-card { background: var(--glass); backdrop-filter: blur(12px); border: 1px solid var(--glass-border); border-radius: 20px; padding: 20px; margin-bottom: 20px; }
        .progress-bar-bg { height: 8px; background: rgba(255,255,255,0.05); border-radius: 10px; overflow: hidden; margin-top: 10px;}
        #progress-fill { height: 100%; width: 0%; background: linear-gradient(90deg, var(--accent), var(--accent-purple)); transition: width 0.5s ease; }
        
        .timer-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 20px; }
        .timer-card { text-align: center; background: var(--glass); padding: 10px; border-radius: 12px; border: 1px solid var(--glass-border); }
        .timer-val { display: block; font-size: 1.4rem; font-weight: 700; }
        .timer-label { font-size: 0.6rem; text-transform: uppercase; color: #94a3b8; }

        .task-card {
            display: flex; align-items: center; gap: 15px; padding: 12px;
            background: rgba(255,255,255,0.03); border: 1px solid var(--glass-border);
            border-radius: 15px; margin-bottom: 10px;
        }
        .task-img { width: 45px; height: 45px; border-radius: 8px; object-fit: cover; }
        .task-card.completed { opacity: 0.5; text-decoration: line-through; }
        
        input { background: rgba(0,0,0,0.2); border: 1px solid var(--glass-border); padding: 10px; border-radius: 8px; color: white; }
        .filter-btn { background: transparent; border: none; color: #94a3b8; padding: 5px 12px; cursor: pointer; border-radius: 8px; }
        .filter-btn.active { 
            background: var(--accent-purple) !important;
             color: white;
             box-shadow: 0 0 10px var(--accent-purple);
            }

        /* --- Calculator --- */
 /* --- Optimized Calculator Styles --- */
.calc-body {
    max-width: 340px; /* Slightly wider for better spacing */
    margin: auto;
    background: #0f172a; /* Deeper dark to match Nexus theme */
    padding: 1.5rem;
    border-radius: 24px;
    border: 1px solid var(--glass-border);
    box-shadow: 0 20px 50px rgba(0,0,0,0.5);
}

#calc-display {
    width: 100%;
    height: 70px;
    text-align: right;
    font-size: 2.5rem;
    background: rgba(0, 0, 0, 0.2);
    border: none;
    color: white;
    padding: 0 1rem;
    margin-bottom: 1rem;
    border-radius: 12px;
    font-family: 'monospace';
}

.calc-btns {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
}

.calc-btns button {
    aspect-ratio: 1/1;
    width: 100%; /* Fill the grid column width */
    height: auto; /* Let aspect-ratio handle the height */
    border-radius: 50%; /* Perfect circle */
    border: 1px solid var(--glass-border);
    background: var(--glass);
    color: white;
    font-size: 1.2rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.calc-btns button:hover {
    background: rgba(255, 255, 255, 0.1);
    transform: scale(1.05);
}

.calc-btns .op { 
    background: rgba(245, 158, 11, 0.2); 
    color: #f59e0b;
    border-color: #f59e0b;
}

/* Fix for the special spanning buttons */
.calc-btns button[onclick*="calculate"] {
    grid-row: span 2;
    height: 100%; /* Span buttons need height to fill two rows */
    aspect-ratio: auto; 
    border-radius: 30px; 
}

.calc-btns button[onclick*="'0'"] {
    grid-column: span 2;
    aspect-ratio: auto;
    border-radius: 30px;
}
        /* --- Calendar --- */
        .cal-container {
            background: var(--glass);
            padding: 2rem;
            border-radius: 20px;
            max-width: 500px;
            margin: auto;
        }
        .cal-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            text-align: center;
        }
        .cal-day-name { font-weight: bold; color: var(--accent); }
    
        /* --- User Profile Styling --- */
.user-profile {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 6px 12px;
    border-radius: 12px;
    transition: background 0.3s ease;
    cursor: pointer;
}

.user-profile:hover {
    background: rgba(255, 255, 255, 0.08);
}

.avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: 2px solid var(--accent);
    object-fit: cover;
}

.user-info {
    display: flex;
    flex-direction: column;
    line-height: 1.2;
}

.user-name {
    font-size: 0.9rem;
    font-weight: 600;
    color: white;
}

.user-role {
    font-size: 0.7rem;
    color: var(--accent);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.divider {
    width: 1px;
    height: 24px;
    background: var(--glass-border);
    margin: 0 10px;
}

/* --- Added Animations --- */
.pulse {
    animation: pulse-animation 2s infinite;
}

@keyframes pulse-animation {
    0% { box-shadow: 0 0 0 0px rgba(16, 185, 129, 0.7); }
    100% { box-shadow: 0 0 0 10px rgba(16, 185, 129, 0); }
}

/* Ensure Logo Text is still clear */
.logo-text {
    font-size: 1rem;
    font-weight: 800;
    letter-spacing: 2px;
    opacity: 0.8;
}

/* Unique Blob Shape for the Auth Card */
.auth-card {
    background: var(--glass);
    backdrop-filter: blur(25px) saturate(180%);
    -webkit-backdrop-filter: blur(25px) saturate(180%);
    border: 2px solid var(--glass-border);
    padding: 3rem 2.5rem;
    width: 400px;
    /* Organic shape: top-left, top-right, bottom-right, bottom-left / variation */
   border-radius: 65% 35% 51% 49% / 37% 41% 59% 63%;
   overflow: hidden;
   display: flex;
    flex-direction: column;
    align-items: stretch;
}


/* border-radius: 65% 35% 51% 49% / 37% 41% 59% 63%;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4), inset 0 0 20px rgba(255,255,255,0.05);
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;/*





/* Subtle animation to make the shape feel fluid */
@keyframes shapeMorph {
    0% { border-radius: 65% 35% 51% 49% / 37% 41% 59% 63%; }
    50% { border-radius: 50% 50% 33% 67% / 55% 27% 73% 45%; }
    100% { border-radius: 65% 35% 51% 49% / 37% 41% 59% 63%; }
}

.auth-card:hover {
    animation: shapeMorph 8s ease-in-out infinite;
    border-color: var(--accent);
}

/* Premium Rounded Inputs */
.auth-input {
    width: 100%;
    background: rgba(255, 255, 255, 0.05) !important;
    border: 1px solid var(--glass-border) !important;
    border-radius: 30px !important; /* Pill shape like image */
    padding: 12px 20px !important;
    margin-bottom: 15px;
    color: white;
    transition: 0.3s;
}

.auth-input:focus {
    border-color: var(--accent) !important;
    background: rgba(255, 255, 255, 0.1) !important;
    outline: none;
    box-shadow: 0 0 15px rgba(56, 189, 248, 0.2);
}

/* Auth Buttons */
.btn-auth {
    width: 100%;
    padding: 12px;
    border-radius: 30px;
    border: none;
    background: linear-gradient(135deg, var(--accent), var(--accent-purple));
    color: white;
    font-weight: 700;
    cursor: pointer;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: 0.3s;
}

.btn-auth:hover {
    transform: scale(1.02);
    box-shadow: 0 0 20px rgba(56, 189, 248, 0.4);
}

header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.8rem 2.5rem;
    background: rgba(255, 255, 255, 0.03);
    backdrop-filter: blur(20px) saturate(160%);
    -webkit-backdrop-filter: blur(20px) saturate(160%);
    border-bottom: 1px solid var(--glass-border);
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
}

.nav-brand {
    display: flex;
    align-items: center;
    gap: 15px;
}

.brand-logo {
    width: 35px;
    height: 35px;
    background: linear-gradient(135deg, var(--accent), var(--accent-purple));
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--accent-glow);
}

.nav-right {
    display: flex;
    align-items: center;
    gap: 25px;
}

/* User Profile Styling in Header */
.user-widget {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 5px 15px;
    background: var(--glass);
    border: 1px solid var(--glass-border);
    border-radius: 50px;
    transition: 0.3s ease;
}

.user-widget:hover {
    background: rgba(255, 255, 255, 0.08);
    border-color: var(--accent);
}

.avatar-sm {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    border: 2px solid var(--accent);
}

/* Weather App Specifics */
.weather-container {
    max-width: 600px;
    margin: 0 auto;
    padding: 20px;
}

.weather-main-card {
    background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
    border-radius: 40px;
    padding: 40px;
    text-align: center;
    position: relative;
    overflow: hidden;
    border: 1px solid var(--glass-border);
}

.weather-icon-lg {
    font-size: 5rem;
    margin: 20px 0;
    filter: drop-shadow(0 0 20px rgba(255,255,255,0.3));
    animation: float 3s ease-in-out infinite;
}

.weather-stats-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
    margin-top: 30px;
}

.stat-item {
    background: var(--glass);
    padding: 15px;
    border-radius: 20px;
    border: 1px solid var(--glass-border);
}

.stat-val { font-weight: 700; display: block; }
.stat-label { font-size: 0.7rem; color: #94a3b8; text-transform: uppercase; }

/* Forecast Strip */
.forecast-strip {
    display: flex;
    gap: 15px;
    overflow-x: auto;
    padding: 20px 0;
    scrollbar-width: none;
}

.forecast-day {
    min-width: 80px;
    background: var(--glass);
    padding: 15px;
    border-radius: 25px;
    text-align: center;
    border: 1px solid var(--glass-border);
}

/* Animations */
@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

.sun-glow { box-shadow: 0 0 50px rgba(245, 158, 11, 0.3); }
.rain-glow { box-shadow: 0 0 50px rgba(56, 189, 248, 0.3); }


.study-layout {
    display: flex;
    gap: 20px;
    height: calc(100vh - 180px);
}

.study-sidebar {
    width: 200px;
    background: var(--glass);
    border: 1px solid var(--glass-border);
    border-radius: 20px;
    padding: 15px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.study-nav-btn {
    background: transparent;
    border: none;
    color: #94a3b8;
    text-align: left;
    padding: 12px 15px;
    border-radius: 12px;
    cursor: pointer;
    transition: 0.3s;
}

.study-nav-btn.active, .study-nav-btn:hover {
    background: rgba(255,255,255,0.05);
    color: var(--accent);
}

.study-content {
    flex: 1;
    overflow-y: auto;
    padding-right: 10px;
}

.study-tab { display: none; animation: fadeIn 0.4s ease; }
.study-tab.active { display: block; }

.quiz-opt {
    background: rgba(255,255,255,0.03);
    border: 1px solid var(--glass-border);
    padding: 12px;
    border-radius: 12px;
    cursor: pointer;
    transition: 0.3s;
}

.quiz-opt:hover { background: rgba(255,255,255,0.08); }
.correct { background: #10b98166 !important; border-color: #10b981 !important; }
.wrong { background: #ef444466 !important; border-color: #ef4444 !important; }


.ox-cell {
    aspect-ratio: 1/1;
    background: var(--glass);
    border: 1px solid var(--glass-border);
    border-radius: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5rem;
    font-weight: 800;
    cursor: pointer;
    transition: all 0.3s ease;
    color: white;
}

.ox-cell:hover {
    background: rgba(255, 255, 255, 0.08);
    border-color: var(--accent);
}

.ox-cell.taken {
    cursor: not-allowed;
}

/* Color markers differently */
.ox-cell[data-val="X"] { color: var(--accent); text-shadow: 0 0 10px rgba(56, 189, 248, 0.5); }
.ox-cell[data-val="O"] { color: var(--accent-purple); text-shadow: 0 0 10px rgba(138, 43, 226, 0.5); }

@keyframes popIn {
    0% { transform: scale(0.5); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
}
.mark-anim { a/* Timer Pulsing Animation */
.timer-pulse {
    animation: pulse-glow 2s infinite;
}

@keyframes pulse-glow {
    0% { box-shadow: 0 0 0 0px rgba(56, 189, 248, 0.4); }
    70% { box-shadow: 0 0 0 20px rgba(56, 189, 248, 0); }
    100% { box-shadow: 0 0 0 0px rgba(56, 189, 248, 0); }
}

#focus-timer .glass-card {
    transition: all 0.5s ease;
}

#focus-timer .filter-btn {
    font-size: 0.7rem;
    padding: 5px 12px;
}nimation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }


.sprint-container { max-width: 600px; margin: 0 auto; }

/* Streak Glow Animation */
.streak-active {
    border-color: #fbbf24 !important;
    box-shadow: 0 0 20px rgba(251, 191, 36, 0.4);
    animation: pulse-streak 1s infinite;
}

@keyframes pulse-streak {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

.sprint-opt {
    background: var(--glass);
    border: 1px solid var(--glass-border);
    padding: 15px;
    border-radius: 15px;
    cursor: pointer;
    transition: 0.2s;
}

.sprint-opt:hover { background: rgba(255,255,255,0.08); border-color: var(--accent); }


/* Power-up Popups */
.power-popup {
    position: absolute;
    top: 20%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 15px 25px;
    border-radius: 30px;
    z-index: 100;
    font-weight: bold;
    pointer-events: none;
    animation: slideUpFade 1.5s forwards;
    display: none;
}

@keyframes slideUpFade {
    0% { opacity: 0; transform: translate(-50%, 0); }
    20% { opacity: 1; transform: translate(-50%, -50%); }
    80% { opacity: 1; transform: translate(-50%, -50%); }
    100% { opacity: 0; transform: translate(-50%, -100%); }
}

/* Time Freeze Visual State */
.timer-frozen {
    background: #38bdf8 !important;
    box-shadow: 0 0 20px #38bdf8;
    animation: iceGlow 1s infinite alternate;
}

@keyframes iceGlow {
    from { opacity: 0.7; }
    to { opacity: 1; }
}

.power-btn {
    background: var(--glass);
    border: 1px solid var(--glass-border);
    border-radius: 12px;
    padding: 10px;
    cursor: pointer;
    transition: 0.3s;
    opacity: 0.3;
    pointer-events: none;
}

.power-btn.active {
    opacity: 1;
    pointer-events: auto;
    border-color: var(--accent);
    box-shadow: var(--accent-glow);
}


/* Ice Freeze Overlay */
#sprint-game-box.frozen-ui {
    border: 3px solid #38bdf8;
    box-shadow: inset 0 0 50px rgba(56, 189, 248, 0.4);
    transition: all 0.3s ease;
}

/* Power-up Unlock Animation */
@keyframes unlockPulse {
    0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(56, 189, 248, 0.7); }
    50% { transform: scale(1.1); box-shadow: 0 0 20px 10px rgba(56, 189, 248, 0); }
    100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(56, 189, 248, 0); }
}

.power-btn.active {
    animation: unlockPulse 1s infinite;
    opacity: 1 !important;
    pointer-events: auto !important;
    cursor: pointer;
}

/* Hint Reveal */
.hint-hide {
    opacity: 0.1;
    transform: scale(0.9);
    pointer-events: none;
    transition: all 0.4s ease;
}
/* Add a shake animation for wrong answers */
/* Add a shake animation for wrong answers */
@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-10px); }
    75% { transform: translateX(10px); }
}

.wrong-answer {
    animation: shake 0.2s ease-in-out 2;
    background: rgba(239, 68, 68, 0.4) !important;
}

/* Success flash */
@keyframes flash-green {
    0% { background: rgba(16, 185, 129, 0.6); }
    100% { background: var(--glass); }
}

.correct-flash {
    animation: flash-green 0.4s ease-out;
}




.stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0; }

.topic-revision-card {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid var(--glass-border);
    border-radius: 15px;
    padding: 20px;
    margin-bottom: 15px;
    transition: 0.3s;
}

.topic-revision-card:hover { border-color: var(--accent); transform: scale(1.01); }

.exam-points { list-style: none; padding-left: 5px; margin-top: 10px; }
.exam-points li { font-size: 0.85rem; color: #94a3b8; margin-bottom: 5px; }
.exam-points i { color: var(--accent); margin-right: 8px; }

.res-card {
    display: flex; align-items: center; gap: 15px; padding: 15px;
    background: var(--glass); border-radius: 12px; text-decoration: none; color: white;
    border: 1px solid var(--glass-border); transition: 0.3s;
}
.res-card:hover { background: rgba(255,255,255,0.1); border-color: var(--accent); }



.calc-body.scientific {
    max-width: 450px;
    padding: 20px;
}

.calc-display-area {
    background: rgba(0, 0, 0, 0.4);
    border-radius: 15px;
    padding: 15px;
    margin-bottom: 20px;
    text-align: right;
    border: 1px solid var(--glass-border);
}

#calc-history {
    font-size: 0.8rem;
    color: var(--accent);
    min-height: 1.2rem;
    opacity: 0.7;
}

#calc-display {
    font-size: 2.2rem;
    width: 100%;
    background: transparent;
    border: none;
    color: white;
    text-align: right;
    margin-top: 5px;
}

/* Color Coding for Buttons */
.calc-btns button.func { background: rgba(255, 255, 255, 0.05); font-size: 0.9rem; color: #94a3b8; }
.calc-btns button.op { background: rgba(56, 189, 248, 0.1); color: var(--accent); }
.calc-btns button.util { color: #ef4444; }
.calc-btns button.equals { background: var(--accent); color: black; font-weight: bold; }

.scientific-grid {
    grid-template-columns: repeat(5, 1fr);
    gap: 8px;
    margin-bottom: 10px;
}


/* Animated Background Blobs */
.bg-aura {
    position: fixed;
    width: 100vw;
    height: 100vh;
    top: 0;
    left: 0;
    z-index: -1;
    overflow: hidden;
    background: #020617; /* Deepest midnight */
}

.blob {
    position: absolute;
    width: 500px;
    height: 500px;
    background: linear-gradient(135deg, var(--accent), var(--accent-purple));
    filter: blur(80px);
    border-radius: 50%;
    opacity: 0.15;
    animation: move 20s infinite alternate;
}

.blob-2 {
    background: #14b8a6;
    right: 0;
    bottom: 0;
    animation-delay: -5s;
    animation-duration: 25s;
}

@keyframes move {
    from { transform: translate(-10%, -10%) rotate(0deg); }
    to { transform: translate(20%, 20%) rotate(360deg); }
}





/* Staggered Entry (JS handled) */
.stagger {
    opacity: 0;
    transform: translateY(30px);
    transition: all 0.6s cubic-bezier(0.22, 1, 0.36, 1);
}

.stagger.reveal {
    opacity: 1;
    transform: translateY(0);
}

/* Glass Card Shimmer & Hover */
.app-card {
    position: relative;
    overflow: hidden; /* For the shimmer */
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.08);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.app-card::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg, transparent, rgba(255,255,255,0.05), transparent);
    transform: rotate(45deg);
    transition: 0.6s;
}

.app-card:hover {
    transform: scale(1.05) translateY(-10px);
    background: rgba(255, 255, 255, 0.07);
    border-color: var(--accent);
    box-shadow: 0 15px 30px rgba(0,0,0,0.4), 0 0 20px rgba(56, 189, 248, 0.2);
}

.app-card:hover::before {
    left: 100%; /* Shimmer move */
}

.app-card:active {
    transform: scale(0.95);
}



#splash {
    position: fixed;
    inset: 0;
    background: #020617;
    z-index: 9999;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    transition: transform 1.2s cubic-bezier(0.8, 0, 0.2, 1), opacity 0.8s ease;
}

/* Cinematic Background */
.splash-bg-aura {
    position: absolute;
    width: 150%;
    height: 150%;
    background: radial-gradient(circle at center, rgba(56, 189, 248, 0.08) 0%, transparent 70%);
    animation: auraPulse 4s infinite alternate;
}

/* Logo Reveal with Shimmer */
.splash-title {
    font-size: 3rem;
    letter-spacing: 12px;
    font-weight: 300;
    color: rgba(255, 255, 255, 0.1);
    position: relative;
    background: linear-gradient(90deg, #334155, #fff, #334155);
    background-size: 200%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: textReveal 2s forwards, shimmer 3s infinite linear;
    animation-delay: 0.5s;
}

/* Modern Loading Bar */
.modern-loader {
    width: 200px;
    height: 2px;
    background: rgba(255, 255, 255, 0.05);
    margin: 20px auto;
    border-radius: 10px;
    overflow: hidden;
    position: relative;
}

.loader-progress {
    width: 0%;
    height: 100%;
    background: var(--accent);
    box-shadow: 0 0 10px var(--accent);
    transition: width 3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Keyframes */
@keyframes textReveal {
    from { opacity: 0; letter-spacing: 20px; filter: blur(10px); }
    to { opacity: 1; letter-spacing: 8px; filter: blur(0); }
}

@keyframes shimmer {
    0% { background-position: -200%; }
    100% { background-position: 200%; }
}

@keyframes auraPulse {
    from { transform: scale(1); opacity: 0.5; }
    to { transform: scale(1.2); opacity: 0.8; }
}

/* Exit Transition Class */
.splash-exit {
    transform: scale(1.1);
    opacity: 0;
    pointer-events: none;
}



.card-viewer {
    perspective: 1000px;
    width: 100%;
    max-width: 450px;
    height: 300px;
    margin: 20px auto;
}

.flip-card {
    width: 100%;
    height: 100%;
    cursor: pointer;
}

.flip-card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    text-align: center;
    transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    transform-style: preserve-3d;
}

.flip-card.flipped .flip-card-inner {
    transform: rotateY(180deg);
}

.flip-card-front, .flip-card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 30px;
}

.flip-card-back {
    transform: rotateY(180deg);
    border-color: var(--accent);
}

.exam-tip {
    margin-top: 15px;
    font-size: 0.8rem;
    color: var(--accent);
    background: rgba(56, 189, 248, 0.1);
    padding: 10px;
    border-radius: 8px;
    border-left: 3px solid var(--accent);
}



:root {
    --flip-speed: 0.6s;
    --bounce-curve: cubic-bezier(0.34, 1.56, 0.64, 1);
}

.card-viewer {
    perspective: 1200px; /* Increased depth */
    width: 100%;
    max-width: 450px;
    height: 320px;
    margin: 30px auto;
}

.flip-card {
    width: 100%;
    height: 100%;
    cursor: pointer;
    transition: transform 0.3s ease; /* For the lift effect */
}

/* Floating & Hover State */
.flip-card:hover {
    transform: translateY(-8px) rotateX(2deg) rotateY(1deg);
}

.flip-card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transition: transform var(--flip-speed) var(--bounce-curve);
    transform-style: preserve-3d;
}

/* The Flip Trigger */
.flip-card.flipped .flip-card-inner {
    transform: rotateY(180deg) scale(1.02); /* Slight scale-up during flip */
}

/* Glass Sides Styling */
.flip-card-front, .flip-card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden; /* Critical for glitch-free flip */
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 35px;
    border-radius: 24px;
    background: rgba(255, 255, 255, 0.04);
    backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}

/* Back Side Polish */
.flip-card-back {
    transform: rotateY(180deg);
    border-color: var(--accent);
    background: linear-gradient(135deg, rgba(255,255,255,0.05), rgba(56, 189, 248, 0.05));
}

/* Shimmer Sweep Animation */
.flip-card::after {
    content: "";
    position: absolute;
    top: -50%; left: -50%;
    width: 200%; height: 200%;
    background: linear-gradient(45deg, transparent, rgba(255,255,255,0.03), transparent);
    transform: rotate(45deg);
    animation: shimmerSweep 6s infinite;
    pointer-events: none;
}

@keyframes shimmerSweep {
    0% { transform: translate(-50%, -50%) rotate(45deg); }
    20%, 100% { transform: translate(50%, 50%) rotate(45deg); }
}


/* Card Category Tag */
.card-tag {
    position: absolute;
    top: 20px;
    left: 20px;
    padding: 5px 12px;
    background: rgba(56, 189, 248, 0.15);
    color: var(--accent);
    border-radius: 20px;
    font-size: 0.7rem;
    font-weight: 700;
    letter-spacing: 1px;
    text-transform: uppercase;
}

/* Flip Hint styling */
.flip-hint {
    position: absolute;
    bottom: 20px;
    font-size: 0.75rem;
    color: #94a3b8;
    opacity: 0.6;
    display: flex;
    align-items: center;
    gap: 8px;
}

.flip-hint i {
    animation: rotateHint 3s infinite linear;
}

@keyframes rotateHint {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}


.coin-stage {
    perspective: 1200px;
    height: 200px;
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 40px 0;
}

.coin {
    width: 120px;
    height: 120px;
    position: relative;
    transform-style: preserve-3d;
    transition: transform 3s cubic-bezier(0.1, 0.5, 0.2, 1);
}

.coin div {
    width: 100%;
    height: 100%;
    position: absolute;
    border-radius: 50%;
    backface-visibility: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2.5rem;
    border: 4px solid rgba(255, 255, 255, 0.2);
}

.side-a { 
    background: linear-gradient(135deg, var(--accent), var(--accent-purple)); 
    color: white;
}

.side-b { 
    background: linear-gradient(135deg, var(--accent-purple), var(--accent)); 
    color: white;
    transform: rotateY(180deg);
}

/* Result Highlighting */
.winner-glow {
    animation: winPulse 1s infinite alternate;
    color: var(--accent) !important;
    font-weight: 800;
}

@keyframes winPulse {
    from { text-shadow: 0 0 10px rgba(56, 189, 248, 0.5); transform: scale(1); }
    to { text-shadow: 0 0 25px rgba(56, 189, 248, 0.8); transform: scale(1.1); }
}


    </style>



</head>
<body>

    <div id="splash">
    <div class="splash-bg-aura"></div>
    <div class="splash-particles"></div>

    <div class="splash-content">
        <div class="logo-reveal">
            <h1 class="splash-title">STUDENT<span>CORNER</span></h1>
            <div class="shimmer-line"></div>
        </div>

        <div class="splash-status">
            <div class="modern-loader">
                <div class="loader-progress"></div>
            </div>
            <p id="status-text">Initializing Workspace...</p>
        </div>
    </div>
</div>

    <div class="container">
 
<header>
    <div class="nav-brand">
        <div class="brand-logo">
            <i class="fas fa-nexus-ui" style="color: white; font-size: 1.2rem;"></i>
        </div>
        <div class="logo-text" style="font-size: 1.4rem;">STUDENT CORNER</div>
    </div>

    <div class="nav-right">
        <div class="system-tray">
            <h1 id="clock" style="margin: 0; font-size: 1rem; color: #94a3b8;">00:00:00</h1>
        </div>

        <div class="divider"></div>

        <div id="auth-controls">
            <button id="login-trigger-btn" onclick="showLoginModal()" class="btn-auth" style="padding: 8px 20px; font-size: 0.8rem;">
                <i class="fas fa-sign-in-alt"></i> Sign In
            </button>

            <div id="user-profile-widget" class="user-widget" style="display: none;">
                <div class="user-info" style="text-align: right;">
                    <span id="display-name" class="user-name" style="display: block; font-size: 0.85rem;">Guest</span>
                    <span class="user-role" style="font-size: 0.6rem; color: var(--accent);">PREMIUM</span>
                </div>
                <img src="" id="user-avatar" alt="User" class="avatar-sm">
                <i class="fas fa-power-off" onclick="handleLogout()" style="margin-left: 10px; cursor: pointer; color: #ef4444; font-size: 0.8rem;"></i>
            </div>
        </div>
    </div>
</header>

<div id="auth-overlay" style="display:none; position:fixed; inset:0; background:rgba(2, 6, 23, 0.7); z-index:2000; align-items:center; justify-content:center; backdrop-filter:blur(15px);">
    
    <div id="signin-container" class="auth-card">
        <div style="text-align: center; margin-bottom: 20px;">
             <div style="width: 50px; height: 50px; background: rgba(255,255,255,0.1); border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; margin-bottom: 10px;">
                <i class="fas fa-fingerprint" style="font-size: 1.5rem; color: var(--accent);"></i>
             </div>
             <h2 style="margin: 0; font-weight: 300; letter-spacing: 2px;">Sign In</h2>
        </div>
        
        <input type="text" id="signin-user" class="auth-input" placeholder="Username">
        <input type="password" class="auth-input" placeholder="Password"> <div style="display: flex; justify-content: space-between; font-size: 0.75rem; margin-bottom: 20px; color: #94a3b8; padding: 0 10px;">
            <label><input type="checkbox"> Remember me</label>
            <a href="#" style="color: var(--accent); text-decoration: none;">Forgot password?</a>
        </div>

        <button onclick="handleSignIn()" class="btn-auth">Login</button>

        <p style="text-align: center; font-size: 0.8rem; margin-top: 25px; color: #94a3b8;">
            Don't have an account? 
            <span onclick="toggleAuthMode('signup')" style="color: var(--accent); cursor: pointer; font-weight: bold;">Sign Up</span>
        </p>
    </div>

    <div id="signup-container" class="auth-card" style="display:none;">
        <h2 style="text-align: center; margin-bottom: 25px; font-weight: 300; letter-spacing: 2px;">Create Account</h2>
        
        <input type="text" id="reg-user" class="auth-input" placeholder="Full Name">
        <input type="email" id="reg-email" class="auth-input" placeholder="Email Address">
        <input type="password" id="reg-pass" class="auth-input" placeholder="Password">
        
        <button onclick="handleSignUp()" class="btn-auth" style="background: var(--accent-purple);">Sign Up</button>

        <button onclick="toggleAuthMode('signin')" style="width: 100%; background: none; border: none; color: #94a3b8; margin-top: 15px; cursor: pointer;">
            <i class="fas fa-arrow-left"></i> Back to Login
        </button>
    </div>
</div>





<div id="home" class="screen active">
    <div class="hero-section">
        <div class="welcome-text">
            <h1 class="stagger">Welcome back, <span id="user-greeting">Scholar</span></h1>
            <p class="stagger"><br></p>
        </div>
        
    </div>

    







    <div class="app-grid">
                <div class="app-card" onclick="openApp('tasks')">
                    <i class="fas fa-tasks"></i>
                    <h3>Task Scheduler</h3>
                    <p>Manage your deadlines</p>
                </div>



                <div class="app-card" onclick="openApp('calc')">
                    <i class="fas fa-calculator"></i>
                    <h3>Calculator</h3>
                    <p>Quick computations</p>
                </div>


                <div class="app-card" onclick="openApp('toss-app')">
                    <i class="fas fa-coins"></i>
                    <h3>Coin Toss</h3>
                    <p>Chance Simulator</p>
                </div>
               
 
                <div class="app-card" onclick="openApp('smart-cards')">
                    <i class="fas fa-clone"></i>
                    <h3>Smart Cards</h3>
                    <p>Dynamic flashcards</p>
                </div>
               

<div class="app-card" onclick="openApp('study-corner')">
    <i class="fas fa-graduation-cap"></i>
    <h3>Study Corner</h3>
    <p>Coding Revision Hub</p>
</div>

<div class="app-card" onclick="openApp('ox-game')">
    <i class="fas fa-times-circle"></i>
    <h3>OX Game</h3>
    <p>Boredom Buster</p>
</div>


<div class="app-card" onclick="openApp('focus-timer')">
    <i class="fas fa-stopwatch"></i>
    <h3>Focus Timer</h3>
    <p>Boost Productivity</p>
</div>

<div class="app-card" onclick="openApp('code-sprint')">
    <i class="fas fa-bolt"></i>
    <h3>Code Sprint</h3>
    <p>Rapid Coding Challenge</p>
</div>

            </div>
        </div>

         <div id="tasks" class="screen">
            <div style="display:flex; align-items:center; gap:15px; margin-bottom:20px;">
                <button onclick="goHome()" class="filter-btn active"><i class="fas fa-arrow-left"></i></button>
                <h2>Task Flow </h2>
            </div>

            <div class="glass-card">
                <div style="display:flex; justify-content:space-between; font-size:0.8rem;">
                    <span>Completion Progress</span>
                    <span id="progress-percent">0%</span>
                </div>
                <div class="progress-bar-bg"><div id="progress-fill"></div></div>
            </div>

            <div class="timer-grid">
                <div class="timer-card"><span class="timer-val" id="days">00</span><span class="timer-label">Days</span></div>
                <div class="timer-card"><span class="timer-val" id="hours">00</span><span class="timer-label">Hrs</span></div>
                <div class="timer-card"><span class="timer-val" id="minutes">00</span><span class="timer-label">Min</span></div>
                <div class="timer-card"><span class="timer-val" id="seconds">00</span><span class="timer-label">Sec</span></div>
            </div>

            <div class="glass-card">
                <div style="display:grid; gap:10px;">
                    <input type="text" id="task-input" placeholder="New Objective...">
                    <div style="display:flex; gap:10px;">
                        <input type="datetime-local" id="deadline-input" style="flex:1">
                        <button onclick="document.getElementById('image-input').click()" class="filter-btn" style="background:var(--glass)"><i class="fas fa-image"></i></button>
                        <input type="file" id="image-input" hidden accept="image/*">
                        <button onclick="addTask()" class="filter-btn active" style="width:50px">+</button>
                    </div>
                </div>
            </div>

            <div style="display:flex; justify-content:space-between; margin-bottom:15px;">
                <div class="filter-pills" style="background:var(--glass); border-radius:10px; padding:4px;">
                    <button class="filter-btn active" onclick="setFilter('all')">All</button>
                    <button class="filter-btn" onclick="setFilter('active')">Active</button>
                    <button class="filter-btn" onclick="setFilter('completed')">Done</button>
                </div>
                <span id="task-count" style="font-size:0.8rem; color:#94a3b8">0 Tasks</span>
            </div>

            <div id="task-list"></div>
        </div>

        <div id="calc" class="screen">
    <div class="app-header">
        <button class="btn-back" onclick="goHome()"><i class="fas fa-arrow-left"></i></button>
        <h2>Scientific Nexus Calc</h2>
    </div>
    <div class="calc-body scientific">
        <div class="calc-display-area">
            <div id="calc-history"></div>
            <input type="text" id="calc-display" readonly value="0">
        </div>

        <div class="calc-grid-container">
            <div class="calc-btns scientific-grid">
                <button class="func" onclick="calcFunc('Math.sin')">sin</button>
                <button class="func" onclick="calcFunc('Math.cos')">cos</button>
                <button class="func" onclick="calcFunc('Math.tan')">tan</button>
                <button class="func" onclick="calcInput('**')">xʸ</button>
                <button class="func" onclick="calcFunc('Math.log10')">log</button>
                
                <button class="func" onclick="calcFunc('Math.sqrt')">√</button>
                <button class="func" onclick="calcInput('Math.PI')">π</button>
                <button class="func" onclick="calcInput('Math.E')">e</button>
                <button class="func" onclick="calcFunc('Math.exp')">eˣ</button>
                <button class="func" onclick="calcFunc('Math.log')">ln</button>
            </div>

            <div class="calc-btns main-grid">
                <button onclick="clearCalc()" class="util">AC</button>
                <button onclick="deleteCalc()" class="util">⌫</button>
                <button onclick="calcInput('%')" class="util">%</button>
                <button onclick="calcInput('/')" class="op">÷</button>

                <button onclick="calcInput('7')">7</button>
                <button onclick="calcInput('8')">8</button>
                <button onclick="calcInput('9')">9</button>
                <button onclick="calcInput('*')" class="op">×</button>

                <button onclick="calcInput('4')">4</button>
                <button onclick="calcInput('5')">5</button>
                <button onclick="calcInput('6')">6</button>
                <button onclick="calcInput('-')" class="op">−</button>

                <button onclick="calcInput('1')">1</button>
                <button onclick="calcInput('2')">2</button>
                <button onclick="calcInput('3')">3</button>
                <button onclick="calcInput('+')" class="op">+</button>

                <button onclick="calcInput('0')" style="grid-column: span 2; border-radius: 30px;">0</button>
                <button onclick="calcInput('.')">.</button>
                <button onclick="calculate()" class="equals">=</button>
            </div>
        </div>
    </div>
</div>


<div id="toss-app" class="screen">
    <div class="app-header">
        <button class="btn-back" onclick="goHome()"><i class="fas fa-arrow-left"></i></button>
        <h2>Decision Toss</h2>
    </div>

    <div class="toss-container">
        <div class="decision-inputs glass-card">
            <div class="input-group">
                <input type="text" id="opt-1" class="auth-input" placeholder="Option A (e.g. Study)">
                <span class="vs-badge">VS</span>
                <input type="text" id="opt-2" class="auth-input" placeholder="Option B (e.g. Sleep)">
            </div>
        </div>

        <div class="coin-stage">
            <div id="coin" class="coin">
                <div class="side-a"><i class="fas fa-font"></i></div>
                <div class="side-b"><i class="fas fa-bold"></i></div>
            </div>
        </div>

        <div class="toss-controls">
            <button id="toss-btn" onclick="executeToss()" class="btn-auth pulse">
                <i class="fas fa-dice"></i> FLIP COIN
            </button>
            <br><br><center><div id="toss-result" class="result-display">Waiting for toss...</div></center>
        </div>
    </div>
</div>


        



<div id="smart-cards" class="screen">
    <div class="app-header">
        <button class="btn-back" onclick="goHome()"><i class="fas fa-arrow-left"></i></button>
        <h2>Smart Flashcards</h2>
    </div>

    <div class="flashcard-container">
        <div class="card-controls glass-card">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="card-search" placeholder="Search topics (e.g. Pointers, Lists...)" onkeyup="filterCards()">
            </div>
            <select id="card-subject-filter" onchange="filterCards()" class="auth-input">
                <option value="all">All Subjects</option>
                <option value="c">C Programming</option>
                <option value="py">Python</option>
                <option value="java">Java</option>
                <option value="ds">Data Structures</option>
            </select>
        </div>

        <div class="card-viewer">
            <div class="flip-card" id="main-card" onclick="this.classList.toggle('flipped')">
                <div class="flip-card-inner">
                    <div class="flip-card-front glass-card">
                        <span class="card-tag" id="card-tag">Subject</span>
                        <h3 id="card-q">Click to reveal the answer</h3>
                        <p class="flip-hint"><i class="fas fa-sync"></i> Click to Flip</p>
                    </div>
                    <div class="flip-card-back glass-card">
                        <h3>Explanation</h3>
                        <p id="card-a">Answer text goes here.</p>
                        <div id="card-tip" class="exam-tip"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card-nav">
            <button onclick="prevCard()" class="filter-btn active"><i class="fas fa-chevron-left"></i></button>
            <span id="card-counter">Card 0 of 0</span>
            <button onclick="nextCard()" class="filter-btn active"><i class="fas fa-chevron-right"></i></button>
        </div>
    </div>
</div>

        

<div id="study-corner" class="screen">
    <div class="app-header">
        <button class="btn-back" onclick="goHome()"><i class="fas fa-arrow-left"></i></button>
        <h2>Study Corner</h2>
    </div>

    <div class="study-layout">
        <div class="study-sidebar">
            <button class="study-nav-btn active" onclick="switchStudyTab('study-dash')"><i class="fas fa-th-large"></i> Dashboard</button>
            <button class="study-nav-btn" onclick="switchStudyTab('study-topics')"><i class="fas fa-book"></i> Topics</button>
            <button class="study-nav-btn" onclick="switchStudyTab('study-quiz')"><i class="fas fa-gamepad"></i> Quiz Game</button>
            <button class="study-nav-btn" onclick="switchStudyTab('study-links')"><i class="fas fa-external-link-alt"></i> Resources</button>
            
        </div>

        <div class="study-content">
            <div id="study-dash" class="study-tab active">
    <div class="glass-card main-welcome">
        <h2><i class="fas fa-rocket"></i> Student Control Panel</h2>
        <p>Your centralized hub for quick revision and practice.</p>
    </div>

    <div class="stats-grid">
        <div class="stat-item card-glow">
            <span class="stat-label">Total Topics</span>
            <span class="stat-val" id="total-topics-count">45</span>
        </div>
        <div class="stat-item card-glow">
            <span class="stat-label">Last Quiz Rank</span>
            <span class="stat-val" id="last-rank">A+</span>
        </div>
        <div class="stat-item card-glow">
            <span class="stat-label">Mastery Level</span>
            <span class="stat-val">72%</span>
        </div>
    </div>

    <div class="quick-actions">
        <button class="action-btn" onclick="switchStudyTab('study-topics')"><i class="fas fa-book-open"></i> Resume Reading</button>
        <button class="action-btn" onclick="switchStudyTab('study-quiz')"><i class="fas fa-vial"></i> Take Assessment</button>
    </div>
</div>

            <div id="study-topics" class="study-tab">
                <h3>Select Subject</h3>
                <div class="filter-pills" style="margin-bottom:20px;">
                    <button class="filter-btn active" onclick="loadTopics('c')">C</button>
                    <button class="filter-btn" onclick="loadTopics('py')">Python</button>
                    <button class="filter-btn" onclick="loadTopics('java')">Java</button>
                    <button class="filter-btn" onclick="loadTopics('ds')">DSA</button>
                </div>
                <div id="topic-display" class="glass-card">
                    </div>
            </div>

            <div id="study-quiz" class="study-tab">
                <div id="quiz-init">
                    <h3>Ready for a Challenge?</h3>
                    <select id="quiz-subject" class="auth-input">
                        <option value="c">C Programming</option>
                        <option value="java">Java</option>
                    </select>
                    <button onclick="startQuiz()" class="btn-auth">Start Quiz</button>
                </div>
                <div id="quiz-play" style="display:none;">
                    <h4 id="quiz-q">Question text?</h4>
                    <div id="quiz-options" style="display:grid; gap:10px; margin:20px 0;"></div>
                    <div id="quiz-feedback" style="margin-bottom:15px; font-weight:bold;"></div>
                    <button id="next-q-btn" onclick="nextQuestion()" class="filter-btn active" style="display:none;">Next Question</button>
                </div>
            </div>

            <div id="study-links" class="study-tab">
    <div class="resource-grid">
        <a href="https://www.freecodecamp.org" target="_blank" class="res-card">
            <i class="fab fa-free-code-camp"></i>
            <div><h4>freeCodeCamp</h4><p>Full Certifications</p></div>
        </a>
        <a href="https://developer.mozilla.org" target="_blank" class="res-card">
            <i class="fab fa-mdn"></i>
            <div><h4>MDN Docs</h4><p>Web Standards</p></div>
        </a>
        <a href="https://www.programiz.com" target="_blank" class="res-card">
            <i class="fas fa-terminal"></i>
            <div><h4>Programiz</h4><p>Beginner Friendly</p></div>
        </a>
        </div>
</div>
        </div>
    </div>
</div>

<div id="ox-game" class="screen">
    <div class="app-header">
        <button class="btn-back" onclick="goHome()"><i class="fas fa-arrow-left"></i></button>
        <h2>OX Game – Tic-Tac-Toe</h2>
    </div>

    <div class="game-container" style="max-width: 400px; margin: 0 auto; text-align: center;">
        <div class="glass-card" style="margin-bottom: 20px; padding: 15px;">
            <h3 id="game-status" style="color: var(--accent); margin: 0;">Player X's Turn</h3>
        </div>

        <div id="ox-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 25px;">
            <div class="ox-cell" onclick="makeMove(0)"></div>
            <div class="ox-cell" onclick="makeMove(1)"></div>
            <div class="ox-cell" onclick="makeMove(2)"></div>
            <div class="ox-cell" onclick="makeMove(3)"></div>
            <div class="ox-cell" onclick="makeMove(4)"></div>
            <div class="ox-cell" onclick="makeMove(5)"></div>
            <div class="ox-cell" onclick="makeMove(6)"></div>
            <div class="ox-cell" onclick="makeMove(7)"></div>
            <div class="ox-cell" onclick="makeMove(8)"></div>
        </div>

        <button onclick="resetOX()" class="btn-auth" style="width: 100%; max-width: 200px;">
            <i class="fas fa-redo"></i> Restart Game
        </button>
    </div>
</div>

<div id="focus-timer" class="screen">
    <div class="app-header">
        <button class="btn-back" onclick="goHome()"><i class="fas fa-arrow-left"></i></button>
        <h2>Focus Timer</h2>
    </div>

    <div class="timer-container" style="max-width: 500px; margin: 0 auto; text-align: center;">
        <div class="glass-card" style="margin-bottom: 20px; padding: 15px;">
            <h3 id="timer-status" style="color: var(--accent); margin: 0;">Time to Focus!</h3>
            <span id="session-count" style="font-size: 0.8rem; color: #94a3b8;">Completed Sessions: 0</span>
        </div>

        <div class="glass-card" style="padding: 40px; border-radius: 50%; width: 300px; height: 300px; margin: 0 auto; display: flex; flex-direction: column; justify-content: center; align-items: center; position: relative; border: 2px solid var(--glass-border);">
            <div id="timer-display" style="font-size: 4rem; font-weight: 800; font-family: 'Courier New', monospace; color: white;">25:00</div>
            
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button onclick="setTimerMode('focus')" class="filter-btn active" id="mode-focus">Focus</button>
                <button onclick="setTimerMode('short')" class="filter-btn" id="mode-short">Short</button>
                <button onclick="setTimerMode('long')" class="filter-btn" id="mode-long">Long</button>
            </div>
        </div>

        <div style="margin-top: 30px; display: flex; justify-content: center; gap: 15px;">
            <button onclick="toggleTimer()" id="timer-start-btn" class="btn-auth" style="width: 120px;">
                <i class="fas fa-play"></i> Start
            </button>
            <button onclick="resetTimer()" class="filter-btn" style="padding: 12px 25px; background: rgba(255,255,255,0.05);">
                <i class="fas fa-redo"></i> Reset
            </button>
        </div>
    </div>
</div>

<div id="code-sprint" class="screen">
    <div class="app-header">
        <button class="btn-back" onclick="goHome()"><i class="fas fa-arrow-left"></i></button>
        <h2>Code Sprint 🔥</h2>
    </div>

    <div class="sprint-container">
        <div style="display:flex; justify-content: space-between; margin-bottom: 20px;">
            <div class="glass-card" style="padding:10px 20px;">Score: <span id="sprint-score">0</span></div>
            <div id="streak-badge" class="glass-card" style="padding:10px 20px; border-color:transparent;">Streak: <span id="sprint-streak">0</span> 🔥</div>
        </div>

        <div class="progress-bar-bg" style="height: 12px; margin-bottom: 30px;">
            <div id="sprint-timer-fill" style="height:100%; width:100%; background:var(--accent); transition: width 0.1s linear;"></div>
        </div>

        <div id="sprint-game-box" class="glass-card" style="min-height: 300px; position:relative;">
            <div id="sprint-start" style="text-align:center; padding:40px;">
                <i class="fas fa-code" style="font-size:3rem; color:var(--accent); margin-bottom:20px;"></i>
                <h2>Ready for the Sprint?</h2>
                <p style="color:#94a3b8; margin-bottom:30px;">Timer gets faster every 3 questions. Don't blink!</p>
                <button onclick="startSprint()" class="btn-auth" style="width:200px;">Start Game</button>
            </div>

            <div id="sprint-active" style="display:none; padding:20px;">
                <span id="sprint-diff" style="font-size:0.7rem; text-transform:uppercase; color:var(--accent-purple);">Difficulty: Easy</span>
                <h3 id="sprint-q" style="margin-top:10px;">Question text goes here?</h3>
                <div id="sprint-options" style="display:grid; gap:12px; margin-top:20px;"></div>
            </div>

            <div id="sprint-over" style="display:none; text-align:center; padding:40px;">
                <h2 style="color:#ef4444;">Game Over!</h2>
                <h1 id="final-sprint-score" style="font-size:4rem; margin:10px 0;">0</h1>
                <p>New High Score: <span id="sprint-high">0</span></p>
                <button onclick="resetSprint()" class="btn-auth" style="width:200px; margin-top:20px;">Try Again</button>
            </div>

            
        </div>
    </div>
</div>

    </div>

    <script>
        // Splash Screen Logic
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('splash').style.opacity = '0';
                setTimeout(() => document.getElementById('splash').style.display = 'none', 800);
            }, 1500);
            updateClock();
            setInterval(updateClock, 1000);
            renderCalendar();
        });

        // Navigation
        function openApp(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        function goHome() {
            openApp('home');
        }

        function updateClock() {
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', second:'2-digit'});
        }

         let tasks = JSON.parse(localStorage.getItem('nexus_tasks')) || [];
        let deadline = localStorage.getItem('nexus_deadline') || "";
        let currentFilter = 'all';

        function openApp(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if(id === 'tasks') renderTasks();
        }
        function goHome() { openApp('home'); }

      function addTask() {
            const text = document.getElementById('task-input').value;
            const dl = document.getElementById('deadline-input').value;
            const imgFile = document.getElementById('image-input').files[0];

            if(!text) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                tasks.push({ id: Date.now(), text, completed: false, image: e.target.result || null });
                if(dl) { deadline = dl; localStorage.setItem('nexus_deadline', dl); }
                saveAndRender();
                document.getElementById('task-input').value = "";
            };
            if(imgFile) reader.readAsDataURL(imgFile);
            else reader.onload({target: {result: null}});
        }

        function toggleTask(id) {
            tasks = tasks.map(t => t.id === id ? {...t, completed: !t.completed} : t);
            saveAndRender();
        }

        function deleteTask(id) {
            tasks = tasks.filter(t => t.id !== id);
            saveAndRender();
        }

        function setFilter(f) {
            currentFilter = f;
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.toggle('active', b.innerText.toLowerCase().includes(f)));
            renderTasks();
        }

        function saveAndRender() {
            localStorage.setItem('nexus_tasks', JSON.stringify(tasks));
            renderTasks();
        }

        function renderTasks() {
            const list = document.getElementById('task-list');
            list.innerHTML = "";
            const filtered = tasks.filter(t => currentFilter === 'all' ? true : (currentFilter === 'completed' ? t.completed : !t.completed));
            
            filtered.forEach(t => {
                const div = document.createElement('div');
                div.className = `task-card ${t.completed ? 'completed' : ''}`;
                div.innerHTML = `
                    ${t.image ? `<img src="${t.image}" class="task-img">` : '<div style="width:45px; height:45px; background:var(--glass); border-radius:8px"></div>'}
                    <div style="flex:1"><strong>${t.text}</strong></div>
                    <button onclick="toggleTask(${t.id})" class="filter-btn" style="color:var(--accent)">✓</button>
                    <button onclick="deleteTask(${t.id})" class="filter-btn" style="color:#ef4444">✕</button>
                `;
                list.appendChild(div);
            });

            // Progress Update
            const completed = tasks.filter(t => t.completed).length;
            const percent = tasks.length ? Math.round((completed / tasks.length) * 100) : 0;
            document.getElementById('progress-fill').style.width = percent + "%";
            document.getElementById('progress-percent').innerText = percent + "%";
            document.getElementById('task-count').innerText = `${tasks.length} Tasks`;
        }

        // --- System Utilities ---
        setInterval(() => {
            document.getElementById('clock').innerText = new Date().toLocaleTimeString();
            if(deadline) {
                const diff = new Date(deadline) - new Date();
                if(diff > 0) {
                    document.getElementById('days').innerText = Math.floor(diff/(1000*60*60*24)).toString().padStart(2,'0');
                    document.getElementById('hours').innerText = Math.floor((diff/(1000*60*60))%24).toString().padStart(2,'0');
                    document.getElementById('minutes').innerText = Math.floor((diff/(1000*60))%60).toString().padStart(2,'0');
                    document.getElementById('seconds').innerText = Math.floor((diff/1000)%60).toString().padStart(2,'0');
                }
            }
        }, 1000);

        // Calculator Logic
        let calcVal = "0";
        function calcInput(v) {
            if(calcVal === "0") calcVal = v;
            else calcVal += v;
            document.getElementById('calc-display').value = calcVal;
        }
        function clearCalc() { calcVal = "0"; document.getElementById('calc-display').value = calcVal; }
        function calculate() {
            try { calcVal = eval(calcVal).toString(); } 
            catch { calcVal = "Error"; }
            document.getElementById('calc-display').value = calcVal;
        }

       
  // --- Updated Login & Security Logic ---

// Run this on page load
window.addEventListener('DOMContentLoaded', () => {
    const savedUser = localStorage.getItem('nexus_user');
    if (savedUser) {
        applyLoginState(savedUser);
    } else {
        // Ensure guest state if no one is logged in
        document.getElementById('display-name').innerText = "Guest User";
        document.getElementById('user-status').innerText = "Locked";
    }
});

function showLoginModal() {
    document.getElementById('login-modal').style.display = 'flex';
}

function closeLoginModal() {
    document.getElementById('login-modal').style.display = 'none';
}

function performLogin() {
    const name = document.getElementById('username-input').value;
    if (name.trim() === "") {
        alert("Please enter a name to initialize.");
        return;
    }

    localStorage.setItem('nexus_user', name);
    applyLoginState(name);
    closeLoginModal();
    alert(`Welcome back, ${name}. System unlocked.`);
}

function applyLoginState(name) {
    document.getElementById('display-name').innerText = name;
    document.getElementById('user-status').innerText = "Premium Account";
    document.getElementById('user-avatar').src = `https://ui-avatars.com/api/?name=${name}&background=38bdf8&color=fff`;
    
    // Hide the Login button from the header once logged in
    document.getElementById('login-trigger-btn').style.display = 'none';
}

// Security Gatekeeper
function openApp(id) {
    const isLoggedIn = localStorage.getItem('nexus_user');
    
    if (!isLoggedIn) {
        // ONLY show the alert. DO NOT call showLoginModal() here.
        alert("⚠️ LOGIN REQUIRED: Please use the login button in the header to access this feature.");
        return; 
    }

    // Normal navigation if logged in
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    if(id === 'tasks') renderTasks();
}

// --- Auth State Management ---

function toggleAuthMode(mode) {
    const signin = document.getElementById('signin-container');
    const signup = document.getElementById('signup-container');
    
    if (mode === 'signup') {
        signin.style.display = 'none';
        signup.style.display = 'block';
    } else {
        signup.style.display = 'none';
        signin.style.display = 'block';
    }
}

function handleSignUp() {
    const user = document.getElementById('reg-user').value.trim();
    const email = document.getElementById('reg-email').value.trim();
    const pass = document.getElementById('reg-pass').value.trim();

    if (!user || !email || !pass) {
        alert("Please fill all fields to register.");
        return;
    }

    // Retrieve existing users or start fresh
    let users = JSON.parse(localStorage.getItem('nexus_registered_users')) || [];
    
    // Check if username exists
    if (users.find(u => u.username.toLowerCase() === user.toLowerCase())) {
        alert("This username is already taken!");
        return;
    }

    // Save New User
    users.push({ username: user, email: email, password: pass });
    localStorage.setItem('nexus_registered_users', JSON.stringify(users));
    
    alert("Registration Successful! Please Sign In.");
    toggleAuthMode('signin');
}

function handleSignIn() {
    const inputUser = document.getElementById('signin-user').value.trim();
    const registeredUsers = JSON.parse(localStorage.getItem('nexus_registered_users')) || [];

    // Find the user in our "Database"
    const validUser = registeredUsers.find(u => u.username.toLowerCase() === inputUser.toLowerCase());

    if (validUser) {
        // Log them in
        localStorage.setItem('nexus_active_session', validUser.username);
        applyLoginState(validUser.username);
        document.getElementById('auth-overlay').style.display = 'none';
        alert(`Access Granted. Welcome, ${validUser.username}.`);
    } else {
        alert("User not found. Please check your username or Sign Up.");
    }
}

function applyLoginState(name) {
    // 1. Update Profile Info
    document.getElementById('display-name').innerText = name;
    document.getElementById('user-avatar').src = `https://ui-avatars.com/api/?name=${name}&background=38bdf8&color=fff`;
    
    // 2. Toggle Header Elements
    document.getElementById('login-trigger-btn').style.display = 'none';
    document.getElementById('user-profile-widget').style.display = 'flex';
}

function handleLogout() {
    if(confirm("Are you sure you want to log out of Nexus OS?")) {
        localStorage.removeItem('nexus_active_session');
        window.location.reload(); // Quickest way to reset state to locked
    }
}

// Modify your handleSignIn success block to ensure it calls the new applyLoginState
function handleSignIn() {
    const inputUser = document.getElementById('signin-user').value.trim();
    const registeredUsers = JSON.parse(localStorage.getItem('nexus_registered_users')) || [];
    const validUser = registeredUsers.find(u => u.username.toLowerCase() === inputUser.toLowerCase());

    if (validUser) {
        localStorage.setItem('nexus_active_session', validUser.username);
        applyLoginState(validUser.username); // Triggers the header change
        document.getElementById('auth-overlay').style.display = 'none';
    } else {
        alert("User not found.");
    }
}

// Modify the check on Page Load
window.addEventListener('DOMContentLoaded', () => {
    const activeSession = localStorage.getItem('nexus_active_session');
    if (activeSession) {
        applyLoginState(activeSession);
    }
});

// Security Gatekeeper for Apps
function openApp(id) {
    if (!localStorage.getItem('nexus_active_session')) {
        alert("⚠️ SECURITY ALERT: Unauthorized Access. Please Sign In.");
        document.getElementById('auth-overlay').style.display = 'flex';
        return;
    }
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    if(id === 'tasks') renderTasks();
}

// Function specifically for the header button
function showLoginModal() {
    document.getElementById('auth-overlay').style.display = 'flex';
    toggleAuthMode('signin');
}

function deleteCalc() {
    if (calcVal.length > 1) {
        calcVal = calcVal.slice(0, -1);
    } else {
        calcVal = "0";
    }
    document.getElementById('calc-display').value = calcVal;
}






// --- Expanded Knowledge Base & Quiz Bank ---
const studyData = {
    stats: {
        totalTopics: 25,
        resources: 12
    },
    topics: {
        c: [
            { title: "Memory Management", desc: "Using malloc(), calloc(), and free() to manage heap memory manually.", points: ["malloc allocates block", "free prevents leaks", "calloc initializes to zero"] },
            { title: "File Handling", desc: "Processing external files using FILE pointers and functions like fopen().", points: ["Use 'w' for write", "Use 'r' for read", "Always fclose() files"] }
        ],
        py: [
            { title: "List Comprehensions", desc: "Concise way to create lists based on existing lists.", points: ["Faster than for-loops", "Supports conditional logic", "Reduces lines of code"] },
            { title: "Decorators", desc: "Functions that modify the behavior of another function without changing its code.", points: ["Uses @ syntax", "Great for logging", "Higher-order functions"] }
        ],
        java: [
            { title: "JVM Architecture", desc: "The engine that drives Java applications by converting bytecode to machine code.", points: ["Platform independence", "Includes JIT compiler", "Garbage collection"] },
            { title: "Collections Framework", desc: "Standard architecture for storing and manipulating groups of objects.", points: ["List for duplicates", "Set for unique items", "Map for key-value pairs"] }
        ],
        ds: [
            { title: "Big O Notation", desc: "Mathematical notation that describes the limiting behavior of a function when the argument tends towards a particular value.", points: ["O(1) is Constant", "O(n) is Linear", "O(log n) is Logarithmic"] },
            { title: "Binary Search Tree", desc: "A node-based binary tree data structure where left nodes are smaller than the parent.", points: ["Search time: O(log n)", "In-order gives sorted", "Efficient for searching"] }
        ],
        dbms: [
            { title: "Normalization", desc: "Process of organizing data to minimize redundancy and dependency.", points: ["1NF: Atomic values", "2NF: No partial dependency", "3NF: No transitive dependency"] },
            { title: "ACID Properties", desc: "Standard for reliable database transactions.", points: ["Atomicity", "Consistency", "Isolation", "Durability"] }
        ]
    },
    quizzes: {
        c: [
            { q: "Which function allocates memory?", a: ["malloc()", "alloc()", "new()"], c: 0 },
            { q: "Size of an int in C?", a: ["2 or 4 bytes", "1 byte", "8 bytes"], c: 0 },
            { q: "C is which level language?", a: ["Low", "High", "Middle"], c: 2 }
        ],
        java: [
            { q: "Java is platform independent because of?", a: ["JVM", "Compiler", "IDE"], c: 0 },
            { q: "Which is not an OOPS concept?", a: ["Inheritance", "Compilation", "Polymorphism"], c: 1 }
        ]
        // Add more items to reach 10-15 per subject...
    }
};
let currentQuiz = [];
let qIdx = 0;
let score = 0;

function switchStudyTab(tabId) {
    document.querySelectorAll('.study-tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.study-nav-btn').forEach(b => b.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
    event.currentTarget.classList.add('active');
}

function loadTopics(sub) {
    document.getElementById('topic-display').innerHTML = studyData.topics[sub] || "Content coming soon!";
}

function startQuiz() {
    const sub = document.getElementById('quiz-subject').value;
    currentQuiz = studyData.quizzes[sub] || [];
    qIdx = 0; score = 0;
    document.getElementById('quiz-init').style.display = 'none';
    document.getElementById('quiz-play').style.display = 'block';
    showQuestion();
}

function showQuestion() {
    const q = currentQuiz[qIdx];
    document.getElementById('quiz-q').innerText = q.q;
    const opts = document.getElementById('quiz-options');
    opts.innerHTML = "";
    q.a.forEach((opt, i) => {
        const btn = document.createElement('div');
        btn.className = 'quiz-opt';
        btn.innerText = opt;
        btn.onclick = () => checkAnswer(i, btn);
        opts.appendChild(btn);
    });
    document.getElementById('next-q-btn').style.display = 'none';
    document.getElementById('quiz-feedback').innerText = "";
}

function checkAnswer(i, btn) {
    const correct = currentQuiz[qIdx].c;
    if (i === correct) {
        btn.classList.add('correct');
        score++;
        document.getElementById('quiz-feedback').innerText = "Correct! ✅";
    } else {
        btn.classList.add('wrong');
        document.getElementById('quiz-feedback').innerText = "Wrong! ❌";
    }
    document.getElementById('next-q-btn').style.display = 'block';
}

function nextQuestion() {
    qIdx++;
    if (qIdx < currentQuiz.length) {
        showQuestion();
    } else {
        alert(`Quiz Over! Score: ${score}/${currentQuiz.length}`);
        document.getElementById('quiz-init').style.display = 'block';
        document.getElementById('quiz-play').style.display = 'none';
    }
}


let oxBoard = ["", "", "", "", "", "", "", "", ""];
let currentPlayer = "X";
let oxActive = true;

const winPatterns = [
    [0, 1, 2], [3, 4, 5], [6, 7, 8], // Rows
    [0, 3, 6], [1, 4, 7], [2, 5, 8], // Cols
    [0, 4, 8], [2, 4, 6]             // Diagonals
];

function makeMove(index) {
    if (!oxActive || oxBoard[index] !== "") return;

    oxBoard[index] = currentPlayer;
    const cell = document.querySelectorAll('.ox-cell')[index];
    cell.innerHTML = `<span class="mark-anim">${currentPlayer}</span>`;
    cell.setAttribute('data-val', currentPlayer);
    cell.classList.add('taken');

    checkOXResult();
}

function checkOXResult() {
    let won = false;
    for (let pattern of winPatterns) {
        const [a, b, c] = pattern;
        if (oxBoard[a] && oxBoard[a] === oxBoard[b] && oxBoard[a] === oxBoard[c]) {
            won = true;
            break;
        }
    }

    if (won) {
        document.getElementById('game-status').innerText = `Player ${currentPlayer} Wins! 🎉`;
        oxActive = false;
        return;
    }

    if (!oxBoard.includes("")) {
        document.getElementById('game-status').innerText = "It's a Draw! 🤝";
        oxActive = false;
        return;
    }

    currentPlayer = currentPlayer === "X" ? "O" : "X";
    document.getElementById('game-status').innerText = `Player ${currentPlayer}'s Turn`;
}

function resetOX() {
    oxBoard = ["", "", "", "", "", "", "", "", ""];
    currentPlayer = "X";
    oxActive = true;
    document.getElementById('game-status').innerText = "Player X's Turn";
    document.querySelectorAll('.ox-cell').forEach(cell => {
        cell.innerHTML = "";
        cell.classList.remove('taken');
        cell.removeAttribute('data-val');
    });
}

let timerInterval;
let timeLeft = 1500; // 25 minutes in seconds
let isTimerRunning = false;
let completedSessions = 0;
let currentMode = 'focus';

function setTimerMode(mode) {
    currentMode = mode;
    clearInterval(timerInterval);
    isTimerRunning = false;
    document.getElementById('timer-start-btn').innerHTML = '<i class="fas fa-play"></i> Start';
    
    // UI Update
    document.querySelectorAll('#focus-timer .filter-btn').forEach(btn => btn.classList.remove('active'));
    document.getElementById(`mode-${mode}`).classList.add('active');

    if (mode === 'focus') {
        timeLeft = 1500;
        document.getElementById('timer-status').innerText = "Time to Focus!";
    } else if (mode === 'short') {
        timeLeft = 300;
        document.getElementById('timer-status').innerText = "Short Break!";
    } else {
        timeLeft = 900;
        document.getElementById('timer-status').innerText = "Long Break!";
    }
    updateTimerDisplay();
}

function updateTimerDisplay() {
    const mins = Math.floor(timeLeft / 60);
    const secs = timeLeft % 60;
    document.getElementById('timer-display').innerText = 
        `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
}

function toggleTimer() {
    const btn = document.getElementById('timer-start-btn');
    const timerCard = document.querySelector('#focus-timer .glass-card[style*="border-radius: 50%"]');

    if (isTimerRunning) {
        clearInterval(timerInterval);
        btn.innerHTML = '<i class="fas fa-play"></i> Start';
        timerCard.classList.remove('timer-pulse');
    } else {
        timerInterval = setInterval(() => {
            if (timeLeft > 0) {
                timeLeft--;
                updateTimerDisplay();
            } else {
                handleTimerEnd();
            }
        }, 1000);
        btn.innerHTML = '<i class="fas fa-pause"></i> Pause';
        timerCard.classList.add('timer-pulse');
    }
    isTimerRunning = !isTimerRunning;
}

function handleTimerEnd() {
    clearInterval(timerInterval);
    isTimerRunning = false;
    document.querySelector('#focus-timer .glass-card').classList.remove('timer-pulse');
    
    if (currentMode === 'focus') {
        completedSessions++;
        document.getElementById('session-count').innerText = `Completed Sessions: ${completedSessions}`;
        alert("Session Completed! Take a break.");
    } else {
        alert("Break over! Ready to focus?");
    }
    resetTimer();
}

function resetTimer() {
    setTimerMode(currentMode);
}


let sprintData = [
    { q: "C: What is the output of 'printf(%d, 5 > 2);'?", a: ["1", "0", "Error"], c: 0, sub: "c" },
    { q: "Python: Correct syntax to create a function?", a: ["def myFunc():", "function myFunc():", "create myFunc():"], c: 0, sub: "py" },
    { q: "Java: Which keyword is used for inheritance?", a: ["extends", "implements", "inherits"], c: 0, sub: "java" },
    { q: "DS: Complexity of Binary Search?", a: ["O(n)", "O(log n)", "O(n^2)"], c: 1, sub: "ds" },
    { q: "DBMS: ACID property 'I' stands for?", a: ["Integrity", "Isolation", "Index"], c: 1, sub: "dbms" }
    // Add more specialized questions here...
];

let sprintTimer;
let sprintTimeLeft;
let sprintScore = 0;
let sprintStreak = 0;
let sprintQIdx = 0;
let currentMaxTime = 20; // Starts at 20s

function startSprint() {
    sprintScore = 0; sprintStreak = 0; sprintQIdx = 0; currentMaxTime = 20;
    document.getElementById('sprint-start').style.display = 'none';
    document.getElementById('sprint-active').style.display = 'block';
    document.getElementById('sprint-over').style.display = 'none';
    nextSprintQuestion();
}

function nextSprintQuestion() {
    // 1. Scalable Difficulty
    if (sprintQIdx > 0 && sprintQIdx % 3 === 0) {
        currentMaxTime = Math.max(currentMaxTime - 5, 5); // Drops: 20 -> 15 -> 10 -> 5 (min)
        document.getElementById('sprint-diff').innerText = currentMaxTime <= 10 ? "Difficulty: Hard" : "Difficulty: Medium";
    }

    // 2. Load Random Question
    const q = sprintData[Math.floor(Math.random() * sprintData.length)];
    document.getElementById('sprint-q').innerText = q.q;
    const opts = document.getElementById('sprint-options');
    opts.innerHTML = "";
    
    q.a.forEach((opt, i) => {
        const div = document.createElement('div');
        div.className = 'sprint-opt';
        div.innerText = opt;
        div.onclick = () => checkSprintAnswer(i, q.c);
        opts.appendChild(div);
    });

    startSprintTimer();
}

function startSprintTimer() {
    clearInterval(sprintTimer);
    sprintTimeLeft = currentMaxTime;
    const bar = document.getElementById('sprint-timer-fill');
    
    sprintTimer = setInterval(() => {
        sprintTimeLeft -= 0.1;
        const percent = (sprintTimeLeft / currentMaxTime) * 100;
        bar.style.width = percent + "%";

        if (sprintTimeLeft <= 0) endSprint();
    }, 100);
}

function checkSprintAnswer(idx, correct) {
    clearInterval(sprintTimer);
    if (idx === correct) {
        sprintScore += (10 * (sprintStreak + 1)); // Points + Streak Bonus
        sprintStreak++;
        sprintQIdx++;
        updateSprintUI();
        nextSprintQuestion();
    } else {
        endSprint();
    }
}

function updateSprintUI() {
    document.getElementById('sprint-score').innerText = sprintScore;
    document.getElementById('sprint-streak').innerText = sprintStreak;
    const badge = document.getElementById('streak-badge');
    if (sprintStreak >= 3) badge.classList.add('streak-active');
    else badge.classList.remove('streak-active');
}

function endSprint() {
    clearInterval(sprintTimer);
    document.getElementById('sprint-active').style.display = 'none';
    document.getElementById('sprint-over').style.display = 'block';
    document.getElementById('final-sprint-score').innerText = sprintScore;
    
    // Save High Score
    const high = localStorage.getItem('nexus_sprint_high') || 0;
    if (sprintScore > high) localStorage.setItem('nexus_sprint_high', sprintScore);
    document.getElementById('sprint-high').innerText = localStorage.getItem('nexus_sprint_high');
}

function resetSprint() { startSprint(); }







const studyDatabase = {
    c: {
        topics: [
            { title: "Pointers", desc: "Variables that store memory addresses.", points: ["Used for dynamic memory allocation.", "Size is usually 4 or 8 bytes.", "Dereferencing uses the * operator."] },
            { title: "Memory Layout", desc: "How a program's memory is organized.", points: ["Stack: Local variables.", "Heap: Dynamic allocation.", "Data Segment: Global variables."] },
            { title: "Storage Classes", desc: "Defines scope and lifetime of variables.", points: ["Auto: Default local.", "Static: Preserves value.", "Extern: Global scope."] }
        ],
        quiz: [
            { q: "Size of a pointer on 64-bit system?", a: ["4 bytes", "8 bytes", "2 bytes"], c: 1 },
            { q: "Which operator is used for address?", a: ["*", "&", "%"], c: 1 },
            { q: "What is a dangling pointer?", a: ["Points to deleted memory", "Points to NULL", "Not initialized"], c: 0 }
        ]
    },
    java: {
        topics: [
            { title: "JVM vs JRE vs JDK", desc: "The Java ecosystem architecture.", points: ["JVM: Runs bytecode.", "JRE: JVM + Libraries.", "JDK: JRE + Development tools."] },
            { title: "OOPs Principles", desc: "The four pillars of Java.", points: ["Encapsulation: Data hiding.", "Inheritance: Code reusability.", "Polymorphism: Overloading/Overriding.", "Abstraction: Hiding complexity."] }
        ],
        quiz: [
            { q: "Which is not a pillar of OOPs?", a: ["Compilation", "Inheritance", "Abstraction"], c: 0 },
            { q: "Keyword to prevent inheritance?", a: ["static", "final", "abstract"], c: 1 },
            { q: "Default value of int?", a: ["0", "null", "undefined"], c: 0 }
                ]
    },
    py: {
        topics: [
            { title: "Variables & Data Types", desc: "Containers for storing data values. Python is dynamically typed, meaning you don't need to declare types.", points: ["int, float, string, boolean", "type() function checks variable type", "Variables are case-sensitive"] },
            { title: "Lists & Tuples", desc: "Ordered collections of items. Lists are mutable (changeable), while Tuples are immutable.", points: ["Lists: [1, 2, 3]", "Tuples: (1, 2, 3)", "Both support indexing and slicing"] },
            { title: "Dictionaries & Sets", desc: "Unordered collections. Dictionaries store Key-Value pairs; Sets store unique items.", points: ["Dict: {'key': 'value'}", "Set: {1, 2, 3} (No duplicates)", "Dictionaries are highly efficient for lookups"] },
            { title: "OOP in Python", desc: "Object-Oriented Programming uses classes and objects to mirror real-world entities.", points: ["Classes: Blueprint for objects", "self keyword refers to the instance", "__init__ is the constructor method"] }
        ],
        quiz: [
            { q: "Which is immutable?", a: ["List", "Tuple", "Dictionary"], c: 1 },
            { q: "Keyword for defining a function?", a: ["function", "def", "func"], c: 1 },
            { q: "How to access dict value?", a: ["dict.key", "dict['key']", "dict.get('key')"], c: 1 }
        ]
    },
    // ds key must match the loadTopics('ds') call
    ds: {
        topics: [
            { title: "Stack & Queue", desc: "Linear data structures following specific order of operations.", points: ["Stack: LIFO (Last In First Out)", "Queue: FIFO (First In First Out)", "Used in undo mechanisms and task scheduling"] },
            { title: "Linked List", desc: "A sequence of elements where each element points to the next.", points: ["Dynamic size", "Efficient insertion/deletion", "Consists of nodes (data + pointer)"] },
            { title: "Trees & BST", desc: "Hierarchical structures with a root node and child nodes.", points: ["BST: Left child < Root < Right child", "In-order traversal of BST gives sorted list", "Height determines search efficiency"] },
            { title: "Time Complexity (Big-O)", desc: "Describes the performance or complexity of an algorithm.", points: ["O(1): Constant time", "O(n): Linear time", "O(log n): Logarithmic (e.g., Binary Search)"] }
        ],
        quiz: [
            { q: "Stack follows which order?", a: ["FIFO", "LIFO", "Random"], c: 1 },
            { q: "Time complexity of binary search?", a: ["O(n)", "O(log n)", "O(n log n)"], c: 1 },
            { q: "Which is not a tree traversal?", a: ["In-order", "Pre-order", "Post-order", "Side-order"], c: 3 }
        ]
    }    // ... Keep existing c and java keys
    // Add Python, DS, and DBMS following this exact structure...
};






function loadTopics(subject) {
    const display = document.getElementById('topic-display');
    const data = studyDatabase[subject];
    
    // Smooth transition effect
    display.style.opacity = 0;
    
    setTimeout(() => {
        display.innerHTML = data.topics.map(topic => `
            <div class="topic-revision-card">
                <h3>${topic.title}</h3>
                <p>${topic.desc}</p>
                <ul class="exam-points">
                    ${topic.points.map(p => `<li><i class="fas fa-caret-right"></i> ${p}</li>`).join('')}
                </ul>
            </div>
        `).join('');
        display.style.opacity = 1;
    }, 200);

    // Update active button state
    document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
}



let calcExpression = ""; // What the math engine sees
let displayValue = "0";  // What the user sees

function calcInput(val) {
    if (displayValue === "0" && val !== '.') {
        displayValue = val;
    } else {
        displayValue += val;
    }
    updateUI();
}

function calcFunc(mathMethod) {
    // Wraps current value in a Math function, e.g., Math.sin(val)
    if (displayValue === "0") return;
    displayValue = `${mathMethod}(${displayValue})`;
    updateUI();
}

function calculate() {
    try {
        // Handle trig degree conversion (optional: defaults to radians)
        const result = eval(displayValue.replace('π', 'Math.PI').replace('e', 'Math.E'));
        
        document.getElementById('calc-history').innerText = displayValue + " =";
        displayValue = Number.isInteger(result) ? result : result.toFixed(8).replace(/\.?0+$/, "");
    } catch (e) {
        displayValue = "Error";
    }
    updateUI();
}

function updateUI() {
    document.getElementById('calc-display').value = displayValue;
}

function clearCalc() {
    displayValue = "0";
    document.getElementById('calc-history').innerText = "";
    updateUI();
}

function deleteCalc() {
    displayValue = displayValue.toString().slice(0, -1);
    if (displayValue === "") displayValue = "0";
    updateUI();
}

// Memory Functions Logic
let memoryValue = 0;
function memAdd() { memoryValue += parseFloat(displayValue); }
function memRecall() { displayValue = memoryValue.toString(); updateUI(); }
function memClear() { memoryValue = 0; }







function revealDashboard() {
    const elements = document.querySelectorAll('.stagger');
    elements.forEach((el, index) => {
        setTimeout(() => {
            el.classList.add('reveal');
        }, index * 100); // 100ms delay between each element
    });
}

// Modify your splash screen logic to call this:
window.addEventListener('load', () => {
    setTimeout(() => {
        document.getElementById('splash').style.opacity = '0';
        setTimeout(() => {
            document.getElementById('splash').style.display = 'none';
            revealDashboard(); // Trigger the stagger
        }, 800);
    }, 1500);
});




window.addEventListener('load', () => {
    const splash = document.getElementById('splash');
    const loaderBar = document.querySelector('.loader-progress');
    const statusText = document.getElementById('status-text');

    // Step 1: Start Progress
    setTimeout(() => {
        loaderBar.style.width = '100%';
    }, 100);

    // Step 2: Dynamic Status Updates
    const messages = [
        "Connecting to Neural Link...",
        "Optimizing Glass Assets...",
        "Workspace Secured."
    ];

    messages.forEach((msg, i) => {
        setTimeout(() => {
            statusText.style.opacity = '0';
            setTimeout(() => {
                statusText.innerText = msg;
                statusText.style.opacity = '1';
            }, 300);
        }, (i + 1) * 800);
    });

    // Step 3: Elegant Transition to Dashboard
    setTimeout(() => {
        splash.classList.add('splash-exit');
        
        // Trigger the home screen staggered reveal (from previous step)
        if (typeof revealDashboard === "function") {
            revealDashboard();
        }

        setTimeout(() => {
            splash.style.display = 'none';
        }, 1200);
    }, 3500);
});




const flashcardDB = [
    // --- C PROGRAMMING (11 Cards) ---
    { sub: "c", t: "Pointers", q: "What is a NULL pointer?", a: "A pointer that doesn't point to any memory location (stores 0).", tip: "Always check if(ptr != NULL) before using it." },
    { sub: "c", t: "Memory", q: "Difference between malloc() and calloc()?", a: "malloc() allocates raw memory; calloc() allocates and clears it to zero.", tip: "calloc is slightly slower but safer." },
    { sub: "c", t: "Storage Classes", q: "What does 'static' do in C?", a: "It preserves the variable's value even after its scope ends.", tip: "Useful for counting function calls." },
    { sub: "c", t: "Dangling Pointer", q: "What is a Dangling Pointer?", a: "A pointer pointing to a memory location that has been freed.", tip: "Set pointers to NULL after calling free()." },
    { sub: "c", t: "Preprocessors", q: "Difference between #include < > and \" \"?", a: "< > searches system paths; \" \" searches current directory first.", tip: "Use < > for standard libs and \" \" for your files." },
    { sub: "c", t: "Sizeof", q: "Is sizeof an operator or a function?", a: "It is a unary operator, not a function.", tip: "Evaluated at compile time." },
    { sub: "c", t: "Typedef", q: "What is the use of typedef?", a: "Creates an alias name for existing data types.", tip: "Makes code more readable, especially with structures." },
    { sub: "c", t: "Arrays", q: "Are array names pointers?", a: "No, but they decay into a pointer to the first element.", tip: "You cannot change the address of an array name." },
    { sub: "c", t: "Strings", q: "How are strings terminated in C?", a: "With the null character '\\0'.", tip: "Remember to add +1 to your array size for this." },
    { sub: "c", t: "Struct vs Union", q: "Main difference between Struct and Union?", a: "Structs give each member its own memory; Unions share one memory space.", tip: "Union size = size of largest member." },
    { sub: "c", t: "Volatile", q: "What is the 'volatile' keyword?", a: "Tells the compiler the variable's value may change unexpectedly (e.g., hardware).", tip: "Prevents the compiler from optimizing it out." },

    // --- PYTHON (10 Cards) ---
    { sub: "py", t: "Mutability", q: "Which Python types are immutable?", a: "Strings, Tuples, Ints, and Floats.", tip: "You cannot change a character in a string directly." },
    { sub: "py", t: "Decorators", q: "What is a Decorator?", a: "A function that wraps another function to extend its behavior.", tip: "Uses the @symbol syntax." },
    { sub: "py", t: "List Comprehension", q: "What is List Comprehension?", a: "A concise way to create lists using a single line of code.", tip: "[x for x in range(10) if x % 2 == 0]" },
    { sub: "py", t: "GIL", q: "What is the Global Interpreter Lock (GIL)?", a: "A mutex that allows only one thread to execute Python bytecode at a time.", tip: "This makes CPU-bound threading slower in Python." },
    { sub: "py", t: "Init", q: "What is __init__ in a class?", a: "The constructor method called when an object is instantiated.", tip: "Always include 'self' as the first argument." },
    { sub: "py", t: "Slicing", q: "What does my_list[::-1] do?", a: "It returns a reversed copy of the list.", tip: "Efficient way to reverse strings too!" },
    { sub: "py", t: "Args/Kwargs", q: "Difference between *args and **kwargs?", a: "*args handles positional arguments (list); **kwargs handles named ones (dict).", tip: "Great for writing flexible functions." },
    { sub: "py", t: "Lambda", q: "What is a Lambda function?", a: "An anonymous, one-line function.", tip: "Example: lambda x: x * 2" },
    { sub: "py", t: "Pickle", q: "What is the 'pickle' module?", a: "Used for serializing and de-serializing Python objects.", tip: "Don't unpickle data from untrusted sources." },
    { sub: "py", t: "Generators", q: "What is the 'yield' keyword?", a: "Turns a function into a generator that returns items one by one.", tip: "Much more memory efficient than lists for large data." },

    // --- JAVA (10 Cards) ---
    { sub: "java", t: "JVM", q: "What is Bytecode?", a: "Intermediate code produced by the Java compiler, runnable on any JVM.", tip: "This is why Java is 'Platform Independent'." },
    { sub: "java", t: "Static", q: "What does 'static' mean in Java?", a: "The member belongs to the class itself rather than instances of the class.", tip: "Static methods cannot access non-static variables." },
    { sub: "java", t: "Final", q: "Final vs Finally vs Finalize?", a: "Final: Constant; Finally: Exception block; Finalize: Cleanup (deprecated).", tip: "Final classes cannot be inherited." },
    { sub: "java", t: "Strings", q: "Why are Strings immutable in Java?", a: "For security, caching, and the String Pool efficiency.", tip: "Use StringBuilder for heavy string manipulations." },
    { sub: "java", t: "Inheritance", q: "Does Java support multiple inheritance?", a: "No, classes can only extend one superclass (to avoid Diamond Problem).", tip: "Use Interfaces to achieve multiple inheritance." },
    { sub: "java", t: "Interfaces", q: "What is a Functional Interface?", a: "An interface with exactly one abstract method.", tip: "Required for using Lambda expressions in Java." },
    { sub: "java", t: "Overloading", q: "Difference between Overloading and Overriding?", a: "Overloading: Same name, different params; Overriding: Same name, same params in child.", tip: "Overloading is Compile-time; Overriding is Runtime." },
    { sub: "java", t: "Access Modifiers", q: "What is 'Protected' access?", a: "Accessible within the same package and by subclasses in other packages.", tip: "Private < Default < Protected < Public." },
    { sub: "java", t: "Collections", q: "ArrayList vs Vector?", a: "ArrayList is non-synchronized (faster); Vector is synchronized (thread-safe).", tip: "Use ArrayList for most modern apps." },
    { sub: "java", t: "Garbage Collection", q: "Can we force Garbage Collection?", a: "No, we can only suggest it via System.gc().", tip: "Java manages memory automatically." },

    // --- DATA STRUCTURES (10 Cards) ---
    { sub: "ds", t: "Binary Search", q: "Time complexity of Binary Search?", a: "O(log n).", tip: "Requirement: The array must be sorted!" },
    { sub: "ds", t: "Hash Map", q: "What is a Hash Collision?", a: "When two different keys result in the same hash index.", tip: "Resolved by Chaining or Open Addressing." },
    { sub: "ds", t: "Graphs", q: "BFS vs DFS?", a: "BFS uses a Queue (Layer by layer); DFS uses a Stack (Deep as possible).", tip: "BFS finds shortest paths in unweighted graphs." },
    { sub: "ds", t: "Big O", q: "What is O(n^2)?", a: "Quadratic time complexity; performance drops fast as N grows.", tip: "Think: Nested loops (like Bubble Sort)." },
    { sub: "ds", t: "Linked List", q: "Singly vs Doubly Linked List?", a: "Singly has one pointer (Next); Doubly has two (Next & Prev).", tip: "Doubly is easier to delete nodes from." },
    { sub: "ds", t: "Heaps", q: "What is a Max-Heap?", a: "A tree where the parent is always greater than or equal to its children.", tip: "Root is always the maximum element." },
    { sub: "ds", t: "BST", q: "Property of a Binary Search Tree?", a: "Left Child < Parent < Right Child.", tip: "In-order traversal always returns sorted data." },
    { sub: "ds", t: "Arrays", q: "What is an 'index out of bounds' error?", a: "Accessing an array at a position that doesn't exist.", tip: "Check your loops: start at 0, end at length-1." },
    { sub: "ds", t: "Stack", q: "Practical use of a Stack?", a: "Undo/Redo features, Function call stacks, and Bracket matching.", tip: "Last In, First Out (LIFO)." },
    { sub: "ds", t: "Recursion", q: "What is the Base Case?", a: "The condition that stops the recursive calls.", tip: "Without a base case, you'll get a Stack Overflow!" },

    // --- DBMS (10 Cards) ---
    { sub: "dbms", t: "ACID", q: "What does ACID stand for?", a: "Atomicity, Consistency, Isolation, Durability.", tip: "Crucial for reliable transaction processing." },
    { sub: "dbms", t: "Normalization", q: "What is 1NF?", a: "A table where every cell contains atomic (indivisible) values.", tip: "Removes duplicate groups." },
    { sub: "dbms", t: "Keys", q: "Primary Key vs Unique Key?", a: "Primary Key: No NULLs allowed, only one per table. Unique: One NULL allowed, multiple per table.", tip: "Both enforce uniqueness." },
    { sub: "dbms", t: "SQL", q: "DELETE vs TRUNCATE?", a: "DELETE is DML (removes rows, loggable); TRUNCATE is DDL (clears table, faster).", tip: "Truncate cannot be rolled back in some DBs." },
    { sub: "dbms", t: "Joins", q: "What is a Left Join?", a: "Returns all rows from the left table and matched rows from the right.", tip: "Unmatched right rows show as NULL." },
    { sub: "dbms", t: "Indexing", q: "Why use Indexes?", a: "To speed up data retrieval (SELECT queries) at the cost of slower writes.", tip: "Think of it as a book index." },
    { sub: "dbms", t: "Foreign Key", q: "What is Referential Integrity?", a: "Rule ensuring that a foreign key value must exist in the parent table.", tip: "Prevents 'orphan' records." },
    { sub: "dbms", t: "Aggregate", q: "What is the HAVING clause?", a: "Used to filter results of a GROUP BY query.", tip: "WHERE filters rows; HAVING filters groups." },
    { sub: "dbms", t: "NoSQL", q: "SQL vs NoSQL?", a: "SQL: Relational/Structured; NoSQL: Non-relational/Document/Key-Value.", tip: "NoSQL is better for scaling and unstructured data." },
    { sub: "dbms", t: "Views", q: "What is a View?", a: "A virtual table based on the result-set of an SQL statement.", tip: "Provides security by hiding complex queries." }
];

let filteredCards = [...flashcardDB];
let currentCardIndex = 0;

function filterCards() {
    const query = document.getElementById('card-search').value.toLowerCase();
    const sub = document.getElementById('card-subject-filter').value;

    filteredCards = flashcardDB.filter(c => {
        const matchesSearch = c.t.toLowerCase().includes(query) || c.q.toLowerCase().includes(query);
        const matchesSub = sub === 'all' || c.sub === sub;
        return matchesSearch && matchesSub;
    });

    currentCardIndex = 0;
    updateCardUI();
}

function updateCardUI() {
    const card = document.getElementById('main-card');
    card.classList.remove('flipped'); // Reset flip on change

    if (filteredCards.length === 0) {
        document.getElementById('card-q').innerText = "No flashcards found. Try another topic.";
        document.getElementById('card-a').innerText = "Try searching for 'Pointers' or 'JVM'.";
        document.getElementById('card-counter').innerText = "0 of 0";
        return;
    }

    const data = filteredCards[currentCardIndex];
    document.getElementById('card-tag').innerText = data.sub.toUpperCase();
    document.getElementById('card-q').innerText = data.q;
    document.getElementById('card-a').innerText = data.a;
    document.getElementById('card-tip').innerText = data.tip ? `PRO TIP: ${data.tip}` : "";
    document.getElementById('card-counter').innerText = `Card ${currentCardIndex + 1} of ${filteredCards.length}`;
}

function nextCard() {
    if (currentCardIndex < filteredCards.length - 1) {
        currentCardIndex++;
        updateCardUI();
    }
}

function prevCard() {
    if (currentCardIndex > 0) {
        currentCardIndex--;
        updateCardUI();
    }
}



function executeToss() {
    const opt1 = document.getElementById('opt-1').value || "Option A";
    const opt2 = document.getElementById('opt-2').value || "Option B";
    const coin = document.getElementById('coin');
    const resultDisplay = document.getElementById('toss-result');
    const btn = document.getElementById('toss-btn');

    // Reset and Start
    btn.disabled = true;
    resultDisplay.classList.remove('winner-glow');
    resultDisplay.innerText = "Tossing...";

    // Randomize 0 or 1
    const isOptionA = Math.random() < 0.5;
    
    // Calculate spins (at least 5 full rotations + final face)
    // rotateY(1800) is 5 full spins. 180 is the other side.
    const finalRotation = isOptionA ? 1800 : 1980; 

    // Animate
    coin.style.transform = `rotateY(${finalRotation}deg) translateY(-100px)`;

    // Sound (Optional lightweight ting)
    try {
        const audio = new Audio('https://www.soundjay.com/misc/sounds/coin-flip-88.mp3');
        audio.volume = 0.3;
        audio.play();
    } catch(e) {}

    setTimeout(() => {
        // Bring coin back down
        coin.style.transform = `rotateY(${finalRotation}deg) translateY(0)`;
        
        // Show result
        const winner = isOptionA ? opt1 : opt2;
        resultDisplay.innerText = `Decision: ${winner}`;
        resultDisplay.classList.add('winner-glow');
        btn.disabled = false;
        
        // Dynamic coin icons update based on inputs
        document.querySelector('.side-a').innerText = opt1[0].toUpperCase();
        document.querySelector('.side-b').innerText = opt2[0].toUpperCase();
    }, 3000);
}



if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js")
    .then(() => console.log("SW registered"))
    .catch(err => console.log("SW failed", err));
}


   </script>
</body>
</html>